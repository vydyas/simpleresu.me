(()=>{var e={};e.id=720,e.ids=[720],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},40149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>c,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>u});var a={};r.r(a),r.d(a,{POST:()=>l});var i=r(16634),s=r(44931),n=r(71010),o=r(75355);async function l(e){try{let{access_token:t}=await e.json();if(!t)throw Error("Access token is missing");let r=await fetch("https://api.linkedin.com/v2/me?projection=(id,firstName,lastName,profilePicture(displayImage~:playableStreams),headline)",{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw await r.text(),Error(`LinkedIn API error: ${r.status} ${r.statusText}`);let a=await r.json(),i=await fetch("https://api.linkedin.com/v2/emailAddress?q=members&projection=(elements*(handle~))",{headers:{Authorization:`Bearer ${t}`}});if(!i.ok)throw await i.text(),Error(`LinkedIn API error: ${i.status} ${i.statusText}`);let s=await i.json(),n=await fetch("https://api.linkedin.com/v2/skills?projection=(elements*(name))",{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw await n.text(),Error(`LinkedIn API error: ${n.status} ${n.statusText}`);let l=await n.json(),d=await fetch("https://api.linkedin.com/v2/positions?projection=(elements*(title,company,startDate,endDate,description))",{headers:{Authorization:`Bearer ${t}`}});if(!d.ok)throw await d.text(),Error(`LinkedIn API error: ${d.status} ${d.statusText}`);let p=await d.json(),u=await fetch("https://api.linkedin.com/v2/educations?projection=(elements*(schoolName,degree,fieldOfStudy,startDate,endDate))",{headers:{Authorization:`Bearer ${t}`}});if(!u.ok)throw await u.text(),Error(`LinkedIn API error: ${u.status} ${u.statusText}`);let c=await u.json(),m={firstName:a.firstName?.localized?.en_US||"",lastName:a.lastName?.localized?.en_US||"",email:s.elements?.[0]?.["handle~"]?.emailAddress||"",headline:a.headline?.localized?.en_US||"",profilePicture:a.profilePicture?.["displayImage~"]?.elements?.[0]?.identifiers?.[0]?.identifier||"",summary:"",positions:p.elements?.map(e=>({title:e.title?.localized?.en_US||"",company:e.company?.localized?.en_US||"",startDate:e.startDate?`${e.startDate.year}-${e.startDate.month}`:"",endDate:e.endDate?`${e.endDate.year}-${e.endDate.month}`:"Present",description:e.description?.localized?.en_US||""}))||[],educations:c.elements?.map(e=>({schoolName:e.schoolName?.localized?.en_US||"",degree:e.degree?.localized?.en_US||"",fieldOfStudy:e.fieldOfStudy?.localized?.en_US||"",startDate:e.startDate?`${e.startDate.year}`:"",endDate:e.endDate?`${e.endDate.year}`:"Present"}))||[],skills:l.elements?.map(e=>({name:e.name?.localized?.en_US||""}))||[]};return o.NextResponse.json(m)}catch(e){return o.NextResponse.json({error:"Internal Server Error"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/linkedin/getProfile/route",pathname:"/api/linkedin/getProfile",filename:"route",bundlePath:"app/api/linkedin/getProfile/route"},resolvedPagePath:"/Users/siddhuvydyabhushana/Desktop/saas/simpleresu.me/frontend/app/api/linkedin/getProfile/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:p,workUnitAsyncStorage:u,serverHooks:c}=d;function m(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:u})}},24429:()=>{},64749:()=>{},16634:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[336],()=>r(40149));module.exports=a})();